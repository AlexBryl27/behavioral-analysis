# Behavioral analysis and clustering of site users based on HTTPS traffic

В работе я провожу исследование, цель которого - вывести хорошо интерпретируемые кластеры пользовательских сессий одного интернет-магазина.

В основе кластеров лежит поведение пользователей. В данном случае я определяю поведение как последовательность запросов пользователей и для определения характера поведения (парсинг, брутборс по учеткам, наполнение корзины и т.д.) используется непосредственно адрес запроса request_uri. 

Сессия - последовательность запросов одного пользователя, разделенная промежутками времени не более часа. В противном случае назначается новая сессия.

В качестве данных используется обезличенный суточный HTTPs-трафик с одного домена. В распоряжении колонки:
* time - время запроса
* fingerprint - цифровой отпечаток устройства пользователя (в основном параметры шифрования и некоторые HTTP заголовки)
* ua_header - user agent header
* cookie - куки пользователя
* src_ip - ip адрес пользователя. Адреса закодированы
* request_uri - сырой адрес запроса

__Мотивация__ исследования - на основе самого простого трафика получить возможность кластеризовать пользовательские сессии с минимальной задержкой на ответ.
Поставленные ограничения актуальны для хостинговых сервисов и высоконагруженных систем, когда необходимо разработать универсальное решение для многих клиентов, не углубляясь в особенности трафика каждого клиента и не подключая тяжеловесные js-библиотеки для считывания более глубоких метрик устройства пользователя.

Одним из способов кластеризации пользовательских сессий может быть кластеризация матрицы user-to-user, полученной из матрицы user-to-feature. Признаком может служить то же количество посещений определенного адреса на сайте. Не смотря на то, что этот способ вполне рабочий, расчет матрицы уже для нескольких сот тысяч пользователей может быть тяжелой задачей, требующей больших ресурсов, в то время как метод, предложенный в этой работе, может быть выполнен даже на локальной машине.

__Этапы:__
1. Идентификация пользователя
2. Идентификация сессии
3. Извлечение событий из запросов
4. Моделирование и кластеризация

Данные лежат по ссылке:
https://drive.google.com/file/d/1XvkwdjoP6H54bwMSp2iWKU4xV9FDlOZV/view?usp=sharing
